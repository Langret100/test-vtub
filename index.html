<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>VTuber Chat (Room)</title>
  <link rel="stylesheet" href="styles.css" />

  <!-- perf: reduce connection setup cost for CDN ESM -->
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <link rel="modulepreload" href="app.js">
  <link rel="preload" href="assets/avatar.vrm" as="fetch" crossorigin>

  <!-- If you add VRMA files, the app will auto-detect and load them from:
       assets/motions/idle.vrma
       assets/motions/walk.vrma
       (No preload here to avoid extra 404 requests when files are not present.) -->

  <!-- Pure static site (GitHub Pages OK): use CDN ESM via importmap -->
  <script type="importmap">
  {
    "imports": {
      "three": "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js",
      "three/examples/jsm/": "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/",
      "@pixiv/three-vrm": "https://cdn.jsdelivr.net/npm/@pixiv/three-vrm@3.4.5/lib/three-vrm.module.min.js",
      "@pixiv/three-vrm-animation": "https://cdn.jsdelivr.net/npm/@pixiv/three-vrm-animation@3.4.4/lib/three-vrm-animation.module.min.js"
    }
  }
  </script>
</head>
<body>
  <div id="app">
    <div id="stageWrap">
      <canvas id="stage"></canvas>

      <div id="loading" class="overlay">
        <div class="card">
          <div class="spinner"></div>
          <div class="title">ì•„ë°”íƒ€/êµì‹¤ ë¡œë”©ì¤‘â€¦</div>
          <div class="desc">ëª¨ë°”ì¼ì€ ì²˜ìŒ í•œ ë²ˆë§Œ ì¡°ê¸ˆ ë” ê±¸ë¦´ ìˆ˜ ìˆì–´ìš”.</div>
        </div>
      </div>

      <button id="audioGate" class="overlayBtn" type="button">ğŸ”Š ìŒì„± ì¼œê¸°</button>
    </div>

    <div id="chat">
      <div id="messages" aria-live="polite"></div>
      <div id="composer">
        <input id="text" type="text" placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ê³  Enterâ€¦ (ì˜ˆ: ì¸ì‚¬ / ê¸°ì¨ / ìŠ¬í”” / í™”ë‚¨ / ê³ ë§ˆì›Œ)" autocomplete="off" />
        <button id="send" type="button">Send</button>
      </div>
    </div>
  </div>

  <script type="module" src="app.js"></script>
</body>
</html>
